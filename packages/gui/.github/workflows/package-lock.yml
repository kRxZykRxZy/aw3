name: Build package-lock

on:
    workflow_dispatch:

jobs:
    build:
        permissions:
            contents: write
        runs-on: ubuntu-latest

        steps:
            - uses: actions/checkout@v4
            - name: Setup node
              uses: actions/setup-node@v4
              with:
                  node-version: 22.x
            - run: rm package-lock.json || true
            - run: npm i
            - run: |
                  git config --local user.email "action@github.com"
                  git config --local user.name "GitHub Action"
                  git add package-lock.json
            - run: git commit -m "Automatic update of package-lock"
            - name: GitHub Push
              # You may pin to the exact commit or the version.
              # uses: ad-m/github-push-action@40bf560936a8022e68a3c00e7d2abefaf01305a6
              uses: ad-m/github-push-action@v0.6.0
              with:
                  branch: develop
                  # Token for the repo. Can be passed in using $\{{ secrets.GITHUB_TOKEN }}
                  github_token: ${secrets.GITHUB_TOKEN}
