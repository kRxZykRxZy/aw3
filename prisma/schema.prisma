datasource db {
    provider = "postgresql"
    url = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           String    @id @map("user_id")
  username     String
  joined       DateTime  @default(now())
  rank         Int       @default(0)
  bio          String?
  status       String?
  passwordHash String    @map("password_hash")
  banned       Boolean   @default(false)
  bannedType   String    @default("temporary")
  bannedReason String    @default("You have been banned for breaking the guidelines.")
  bannedExpiry DateTime  @default(now())
  ghost        Boolean   @default(false)
  userMETA     String?

  projects     Project[] 
  sessions     Session[]
}

model Project {
  id           String   @id
  title        String?
  created      DateTime @default(now())
  instructions String?
  notes        String?
  creatorId    String
  ghost        Boolean  @default(true)
  projectJson  String?
  projectMeta  String?

  creator      User @relation(fields: [creatorId], references: [id])
}

model Session {
  id        String   @id
  userId    String
  expiresAt DateTime @map("expires_at")

  user      User @relation(fields: [userId], references: [id])
}
